"use strict";(self["webpackChunkapp"]=self["webpackChunkapp"]||[]).push([[501],{501:function(e,o,t){t.r(o),t.d(o,{default:function(){return p}});var r=function(){var e=this,o=e._self._c;return o("el-dialog",{attrs:{visible:e.showDialog,top:"7vh",title:e.dialogTitle,center:"",width:"30%","before-close":e.handleClose},on:{"update:visible":function(o){e.showDialog=o}},scopedSlots:e._u([{key:"footer",fn:function(){return[o("span",{staticClass:"dialog-footer"},[o("el-button",{attrs:{type:"primary"},on:{click:e.handleConfirm}},[e._v("确认")]),o("el-button",{on:{click:e.handleClose}},[e._v("取消")])],1)]},proxy:!0}])},[o("el-form",{attrs:{model:e.form,"label-width":"100px"}},[o("el-form-item",{attrs:{label:"上级菜单",prop:"parentId"}},[o("el-select",{attrs:{clearable:"",placeholder:"请选择上级菜单",disabled:"M"==e.form.menuType},on:{change:e.changeOrdNum},model:{value:e.form.parentId,callback:function(o){e.$set(e.form,"parentId",o)},expression:"form.parentId"}},e._l(e.tableData,(function(t){return o("div",{key:t.id},[o("el-option",{directives:[{name:"show",rawName:"v-show",value:"C"==e.form.menuType||"F"==e.form.menuType,expression:"form.menuType == 'C' || form.menuType == 'F'"}],attrs:{disabled:"F"==e.form.menuType||"首页"==t.name||"退出系统"==t.name,label:t.name,value:t.id}}),e._l(t.children,(function(t){return o("div",{key:t.id},[o("el-option",{directives:[{name:"show",rawName:"v-show",value:"F"==e.form.menuType,expression:"form.menuType == 'F'"}],attrs:{label:t.name,value:t.id}},[o("span",[e._v(e._s(" -- "+t.name))])])],1)}))],2)})),0)],1),o("el-form-item",{attrs:{label:"菜单类型",prop:"menuType","label-width":"100px"}},[o("el-radio-group",{on:{change:e.menuChange},model:{value:e.form.menuType,callback:function(o){e.$set(e.form,"menuType",o)},expression:"form.menuType"}},[o("el-radio",{attrs:{label:"M"}},[e._v("目录")]),o("el-radio",{attrs:{label:"C"}},[e._v("菜单")]),o("el-radio",{attrs:{label:"F"}},[e._v("按钮")])],1)],1),o("el-form-item",{attrs:{label:"菜单图标",prop:"icon"}},[o("el-popover",{attrs:{placement:"bottom",width:"450",trigger:"click"},model:{value:e.visible,callback:function(o){e.visible=o},expression:"visible"}},[o("div",{staticClass:"iconList"},e._l(e.iconList,(function(t){return o("i",{key:t,class:t,staticStyle:{"font-size":"20px"},on:{click:function(o){return e.setIcon(t)}}})})),0),o("el-input",{attrs:{slot:"reference","suffix-icon":"data-icon",placeholder:"请输入",clearable:""},slot:"reference",model:{value:e.form.icon,callback:function(o){e.$set(e.form,"icon",o)},expression:"form.icon"}},[o("template",{slot:"append"},[o("i",{class:e.form.icon})])],2)],1)],1),o("el-form-item",{attrs:{label:"菜单名称",prop:"name"}},[o("el-input",{model:{value:e.form.name,callback:function(o){e.$set(e.form,"name",o)},expression:"form.name"}})],1),o("el-form-item",{attrs:{label:"权限标识",prop:"perms"}},[o("el-input",{model:{value:e.form.perms,callback:function(o){e.$set(e.form,"perms",o)},expression:"form.perms"}})],1),o("el-form-item",{attrs:{label:"路由路径",prop:"component"}},[o("el-input",{model:{value:e.form.path,callback:function(o){e.$set(e.form,"path",o)},expression:"form.path"}})],1),o("el-form-item",{attrs:{label:"组件路径",prop:"component"}},[o("el-input",{model:{value:e.form.component,callback:function(o){e.$set(e.form,"component",o)},expression:"form.component"}})],1),o("el-form-item",{attrs:{label:"备注",prop:"component"}},[o("el-input",{model:{value:e.form.remark,callback:function(o){e.$set(e.form,"remark",o)},expression:"form.remark"}})],1),o("el-form-item",{attrs:{label:"显示顺序",prop:"orderNum"}},[o("el-input-number",{attrs:{min:1,label:"显示顺序"},model:{value:e.form.orderNum,callback:function(o){e.$set(e.form,"orderNum",o)},expression:"form.orderNum"}})],1)],1)],1)},a=[];const l=["platform-eleme","eleme","delete-solid","delete","s-tools","setting","user-solid","user","phone","phone-outline","more","more-outline","star-on","star-off","s-goods","goods","warning","warning-outline","question","info","remove","circle-plus","success","error","zoom-in","zoom-out","remove-outline","circle-plus-outline","circle-check","circle-close","s-help","help","minus","plus","check","close","picture","picture-outline","picture-outline-round","upload","upload2","download","camera-solid","camera","video-camera-solid","video-camera","message-solid","bell","s-cooperation","s-order","s-platform","s-fold","s-unfold","s-operation","s-promotion","s-home","s-release","s-ticket","s-management","s-open","s-shop","s-marketing","s-flag","s-comment","s-finance","s-claim","s-custom","s-opportunity","s-data","s-check","s-grid","menu","share","d-caret","caret-left","caret-right","caret-bottom","caret-top","bottom-left","bottom-right","back","right","bottom","top","top-left","top-right","arrow-left","arrow-right","arrow-down","arrow-up","d-arrow-left","d-arrow-right","video-pause","video-play","refresh","refresh-right","refresh-left","finished","sort","sort-up","sort-down","rank","loading","view","c-scale-to-original","date","edit","edit-outline","folder","folder-opened","folder-add","folder-remove","folder-delete","folder-checked","tickets","document-remove","document-delete","document-copy","document-checked","document","document-add","printer","paperclip","takeaway-box","search","monitor","attract","mobile","scissors","umbrella","headset","brush","mouse","coordinate","magic-stick","reading","data-line","data-board","pie-chart","data-analysis","collection-tag","film","suitcase","suitcase-1","receiving","collection","files","notebook-1","notebook-2","toilet-paper","office-building","school","table-lamp","house","no-smoking","smoking","shopping-cart-full","shopping-cart-1","shopping-cart-2","shopping-bag-1","shopping-bag-2","sold-out","sell","present","box","bank-card","money","coin","wallet","discount","price-tag","news","guide","male","female","thumb","cpu","link","connection","open","turn-off","set-up","chat-round","chat-line-round","chat-square","chat-dot-round","chat-dot-square","chat-line-square","message","postcard","position","turn-off-microphone","microphone","close-notification","bangzhu","time","odometer","crop","aim","switch-button","full-screen","copy-document","mic","stopwatch","medal-1","medal","trophy","trophy-1","first-aid-kit","discover","place","location","location-outline","location-information","add-location","delete-location","map-location","alarm-clock","timer","watch-1","watch","lock","unlock","key","service","mobile-phone","bicycle","truck","ship","basketball","football","soccer","baseball","wind-power","light-rain","lightning","heavy-rain","sunrise","sunrise-1","sunset","sunny","cloudy","partly-cloudy","cloudy-and-sunny","moon","moon-night","dish","dish-1","food","chicken","fork-spoon","knife-fork","burger","tableware","sugar","dessert","ice-cream","hot-water","water-cup","coffee-cup","cold-drink","goblet","goblet-full","goblet-square","goblet-square-full","refrigerator","grape","watermelon","cherry","apple","pear","orange","coffee","ice-tea","ice-drink","milk-tea","potato-strips","lollipop","ice-cream-square","ice-cream-round"].map((e=>"el-icon-"+e));var i=t(7877),n={props:{id:{default:-1,required:!0},showDialog:{type:Boolean,default:!1,required:!0},data:{type:Array},dialogTitle:{type:String}},data(){return{form:{parentId:null,menuType:"M"},iconList:[],visible:!1,tableData:[]}},watch:{id:function(e,o){-1!=e&&e?this.search(e):(this.form={parentId:null,menuType:"M"},this.editMenu())},data:{handler(e,o){this.tableData=JSON.parse(JSON.stringify(e))},deep:!0,immediate:!0}},created(){this.iconList=l},methods:{search(e){i.Z.getMenuBuId(e).then((e=>{this.form=e.data}))},handleConfirm(){null!=this.form.parentId&&""!=this.form.parentId||(this.form.parentId=0),i.Z.editMenu(this.form).then((e=>{200===e.code?(this.$message.success("操作成功"),this.$emit("initMenuList"),this.handleClose()):this.$message.error(e.message)}))},handleClose(){this.$emit("close")},setIcon(e){this.form.icon=e,this.visible=!1},editMenu(){"M"==this.form.menuType&&(this.form.orderNum=this.tableData.length+1)},changeOrdNum(){if("C"==this.form.menuType)this.form.orderNum=this.tableData.find((e=>e.id===this.form.parentId)).children.length+1;else if("F"==this.form.menuType)for(let e of this.tableData)for(let o of e.children)if(o.id===this.form.parentId){let e=o.children.pop();return void(this.form.orderNum=e?e.orderNum+1:1)}},menuChange(){this.form.parentId=null,this.editMenu()}}},s=n,c=t(1001),m=(0,c.Z)(s,r,a,!1,null,"0d85d052",null),p=m.exports}}]);
//# sourceMappingURL=501.5471cbc3.js.map