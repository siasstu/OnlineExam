"use strict";(self["webpackChunkapp"]=self["webpackChunkapp"]||[]).push([[5626,501],{501:function(e,t,o){o.r(t),o.d(t,{default:function(){return d}});var l=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{visible:e.showDialog,top:"7vh",title:e.dialogTitle,center:"",width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.showDialog=t}},scopedSlots:e._u([{key:"footer",fn:function(){return[t("span",{staticClass:"dialog-footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.handleConfirm}},[e._v("确认")]),t("el-button",{on:{click:e.handleClose}},[e._v("取消")])],1)]},proxy:!0}])},[t("el-form",{attrs:{model:e.form,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"上级菜单",prop:"parentId"}},[t("el-select",{attrs:{clearable:"",placeholder:"请选择上级菜单",disabled:"M"==e.form.menuType},on:{change:e.changeOrdNum},model:{value:e.form.parentId,callback:function(t){e.$set(e.form,"parentId",t)},expression:"form.parentId"}},e._l(e.tableData,(function(o){return t("div",{key:o.id},[t("el-option",{directives:[{name:"show",rawName:"v-show",value:"C"==e.form.menuType||"F"==e.form.menuType,expression:"form.menuType == 'C' || form.menuType == 'F'"}],attrs:{disabled:"F"==e.form.menuType||"首页"==o.name||"退出系统"==o.name,label:o.name,value:o.id}}),e._l(o.children,(function(o){return t("div",{key:o.id},[t("el-option",{directives:[{name:"show",rawName:"v-show",value:"F"==e.form.menuType,expression:"form.menuType == 'F'"}],attrs:{label:o.name,value:o.id}},[t("span",[e._v(e._s(" -- "+o.name))])])],1)}))],2)})),0)],1),t("el-form-item",{attrs:{label:"菜单类型",prop:"menuType","label-width":"100px"}},[t("el-radio-group",{on:{change:e.menuChange},model:{value:e.form.menuType,callback:function(t){e.$set(e.form,"menuType",t)},expression:"form.menuType"}},[t("el-radio",{attrs:{label:"M"}},[e._v("目录")]),t("el-radio",{attrs:{label:"C"}},[e._v("菜单")]),t("el-radio",{attrs:{label:"F"}},[e._v("按钮")])],1)],1),t("el-form-item",{attrs:{label:"菜单图标",prop:"icon"}},[t("el-popover",{attrs:{placement:"bottom",width:"450",trigger:"click"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[t("div",{staticClass:"iconList"},e._l(e.iconList,(function(o){return t("i",{key:o,class:o,staticStyle:{"font-size":"20px"},on:{click:function(t){return e.setIcon(o)}}})})),0),t("el-input",{attrs:{slot:"reference","suffix-icon":"data-icon",placeholder:"请输入",clearable:""},slot:"reference",model:{value:e.form.icon,callback:function(t){e.$set(e.form,"icon",t)},expression:"form.icon"}},[t("template",{slot:"append"},[t("i",{class:e.form.icon})])],2)],1)],1),t("el-form-item",{attrs:{label:"菜单名称",prop:"name"}},[t("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),t("el-form-item",{attrs:{label:"权限标识",prop:"perms"}},[t("el-input",{model:{value:e.form.perms,callback:function(t){e.$set(e.form,"perms",t)},expression:"form.perms"}})],1),t("el-form-item",{attrs:{label:"路由路径",prop:"component"}},[t("el-input",{model:{value:e.form.path,callback:function(t){e.$set(e.form,"path",t)},expression:"form.path"}})],1),t("el-form-item",{attrs:{label:"组件路径",prop:"component"}},[t("el-input",{model:{value:e.form.component,callback:function(t){e.$set(e.form,"component",t)},expression:"form.component"}})],1),t("el-form-item",{attrs:{label:"备注",prop:"component"}},[t("el-input",{model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1),t("el-form-item",{attrs:{label:"显示顺序",prop:"orderNum"}},[t("el-input-number",{attrs:{min:1,label:"显示顺序"},model:{value:e.form.orderNum,callback:function(t){e.$set(e.form,"orderNum",t)},expression:"form.orderNum"}})],1)],1)],1)},a=[];const r=["platform-eleme","eleme","delete-solid","delete","s-tools","setting","user-solid","user","phone","phone-outline","more","more-outline","star-on","star-off","s-goods","goods","warning","warning-outline","question","info","remove","circle-plus","success","error","zoom-in","zoom-out","remove-outline","circle-plus-outline","circle-check","circle-close","s-help","help","minus","plus","check","close","picture","picture-outline","picture-outline-round","upload","upload2","download","camera-solid","camera","video-camera-solid","video-camera","message-solid","bell","s-cooperation","s-order","s-platform","s-fold","s-unfold","s-operation","s-promotion","s-home","s-release","s-ticket","s-management","s-open","s-shop","s-marketing","s-flag","s-comment","s-finance","s-claim","s-custom","s-opportunity","s-data","s-check","s-grid","menu","share","d-caret","caret-left","caret-right","caret-bottom","caret-top","bottom-left","bottom-right","back","right","bottom","top","top-left","top-right","arrow-left","arrow-right","arrow-down","arrow-up","d-arrow-left","d-arrow-right","video-pause","video-play","refresh","refresh-right","refresh-left","finished","sort","sort-up","sort-down","rank","loading","view","c-scale-to-original","date","edit","edit-outline","folder","folder-opened","folder-add","folder-remove","folder-delete","folder-checked","tickets","document-remove","document-delete","document-copy","document-checked","document","document-add","printer","paperclip","takeaway-box","search","monitor","attract","mobile","scissors","umbrella","headset","brush","mouse","coordinate","magic-stick","reading","data-line","data-board","pie-chart","data-analysis","collection-tag","film","suitcase","suitcase-1","receiving","collection","files","notebook-1","notebook-2","toilet-paper","office-building","school","table-lamp","house","no-smoking","smoking","shopping-cart-full","shopping-cart-1","shopping-cart-2","shopping-bag-1","shopping-bag-2","sold-out","sell","present","box","bank-card","money","coin","wallet","discount","price-tag","news","guide","male","female","thumb","cpu","link","connection","open","turn-off","set-up","chat-round","chat-line-round","chat-square","chat-dot-round","chat-dot-square","chat-line-square","message","postcard","position","turn-off-microphone","microphone","close-notification","bangzhu","time","odometer","crop","aim","switch-button","full-screen","copy-document","mic","stopwatch","medal-1","medal","trophy","trophy-1","first-aid-kit","discover","place","location","location-outline","location-information","add-location","delete-location","map-location","alarm-clock","timer","watch-1","watch","lock","unlock","key","service","mobile-phone","bicycle","truck","ship","basketball","football","soccer","baseball","wind-power","light-rain","lightning","heavy-rain","sunrise","sunrise-1","sunset","sunny","cloudy","partly-cloudy","cloudy-and-sunny","moon","moon-night","dish","dish-1","food","chicken","fork-spoon","knife-fork","burger","tableware","sugar","dessert","ice-cream","hot-water","water-cup","coffee-cup","cold-drink","goblet","goblet-full","goblet-square","goblet-square-full","refrigerator","grape","watermelon","cherry","apple","pear","orange","coffee","ice-tea","ice-drink","milk-tea","potato-strips","lollipop","ice-cream-square","ice-cream-round"].map((e=>"el-icon-"+e));var i=o(7877),n={props:{id:{default:-1,required:!0},showDialog:{type:Boolean,default:!1,required:!0},data:{type:Array},dialogTitle:{type:String}},data(){return{form:{parentId:null,menuType:"M"},iconList:[],visible:!1,tableData:[]}},watch:{id:function(e,t){-1!=e&&e?this.search(e):(this.form={parentId:null,menuType:"M"},this.editMenu())},data:{handler(e,t){this.tableData=JSON.parse(JSON.stringify(e))},deep:!0,immediate:!0}},created(){this.iconList=r},methods:{search(e){i.Z.getMenuBuId(e).then((e=>{this.form=e.data}))},handleConfirm(){null!=this.form.parentId&&""!=this.form.parentId||(this.form.parentId=0),i.Z.editMenu(this.form).then((e=>{200===e.code?(this.$message.success("操作成功"),this.$emit("initMenuList"),this.handleClose()):this.$message.error(e.message)}))},handleClose(){this.$emit("close")},setIcon(e){this.form.icon=e,this.visible=!1},editMenu(){"M"==this.form.menuType&&(this.form.orderNum=this.tableData.length+1)},changeOrdNum(){if("C"==this.form.menuType)this.form.orderNum=this.tableData.find((e=>e.id===this.form.parentId)).children.length+1;else if("F"==this.form.menuType)for(let e of this.tableData)for(let t of e.children)if(t.id===this.form.parentId){let e=t.children.pop();return void(this.form.orderNum=e?e.orderNum+1:1)}},menuChange(){this.form.parentId=null,this.editMenu()}}},s=n,c=o(1001),m=(0,c.Z)(s,l,a,!1,null,"0d85d052",null),d=m.exports},5626:function(e,t,o){o.r(t),o.d(t,{default:function(){return d}});var l=function(){var e=this,t=e._self._c;return t("div",[t("el-row",{staticClass:"header"},[t("el-button",{staticClass:"el-icon-plus",attrs:{type:"success",size:"mini"},on:{click:function(t){return e.handleDialogValue(null)}}},[e._v("新增")])],1),t("el-scrollbar",{staticStyle:{height:"calc(100vh - 155px)",width:"100%","background-color":"#fff"}},[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-key":"id",stripe:"",border:"","tree-props":{children:"children",hasChildren:"hasChildren"}}},[t("el-table-column",{attrs:{prop:"name",label:"菜单名称",width:"200"}}),t("el-table-column",{attrs:{prop:"icon",label:"图标",width:"70",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[t("i",{class:e.row.icon})]}}])}),t("el-table-column",{attrs:{prop:"orderNum",label:"排序",width:"70",align:"center"}}),t("el-table-column",{attrs:{prop:"perms",label:"权限标识",width:"200"}}),t("el-table-column",{attrs:{prop:"path",label:"路由路径",width:"180"}}),t("el-table-column",{attrs:{prop:"component",label:"组件路径",width:"220"}}),t("el-table-column",{attrs:{prop:"menuType",label:"菜单类型",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(o){return["M"===o.row.menuType?t("el-tag",{attrs:{size:"small",type:"danger",effect:"dark"}},[e._v("目录")]):"C"===o.row.menuType?t("el-tag",{attrs:{size:"small",type:"success",effect:"dark"}},[e._v("菜单")]):"F"===o.row.menuType?t("el-tag",{attrs:{size:"small",type:"warning",effect:"dark"}},[e._v("按钮")]):e._e()]}}])}),t("el-table-column",{attrs:{prop:"createTime",label:"创建时间",align:"center"}}),t("el-table-column",{attrs:{prop:"remark",label:"备注",align:"center"}}),t("el-table-column",{attrs:{prop:"action",label:"操作",width:"250",fixed:"right",align:"center"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("el-button",{staticClass:"el-icon-edit",attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.handleDialogValue(o.row.id)}}}),t("el-popconfirm",{attrs:{title:"您确定要删除这条记录吗？"},on:{confirm:function(t){return e.handleDelete(o.row.id)}},scopedSlots:e._u([{key:"reference",fn:function(){return[t("el-button",{staticClass:"el-icon-delete",attrs:{type:"danger",size:"mini"}})]},proxy:!0}],null,!0)})]}}])})],1)],1),t("menu-dialog",{attrs:{id:e.id,showDialog:e.showDialog,dialogTitle:e.dialogTitle,data:e.tableData},on:{close:e.handleClose,initMenuList:e.search}})],1)},a=[],r=o(7877),i=o(501),n={components:{MenuDialog:i["default"]},data(){return{tableData:[],showDialog:!1,id:null,dialogTitle:""}},created(){this.search()},methods:{search(){r.Z.munuList().then((e=>{this.tableData=e.data}))},handleDialogValue(e){null!=e?(this.dialogTitle="修改菜单",this.id=e):(this.dialogTitle="添加菜单",this.id=-1),this.showDialog=!0},handleClose(){this.id=null,this.showDialog=!1},handleDelete(e){r.Z.removeMenu(e).then((e=>{200===e.code?(this.$message.success("删除成功"),this.search()):this.$message.error(e.message)}))}}},s=n,c=o(1001),m=(0,c.Z)(s,l,a,!1,null,null,null),d=m.exports}}]);
//# sourceMappingURL=5626.4233bfb2.js.map