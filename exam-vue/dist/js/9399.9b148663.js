"use strict";(self["webpackChunkapp"]=self["webpackChunkapp"]||[]).push([[9399,5272,319,5945,8943],{8441:function(e,t,a){a.d(t,{Z:function(){return u}});var l=function(){var e=this,t=e._self._c;return t("div",{staticClass:"pagination-container",class:{hidden:e.hidden}},[t("el-pagination",e._b({attrs:{background:e.background,"current-page":e.currentPage,layout:e.layout,"page-sizes":e.pageSizes,total:e.total,"page-size":e.pageSize},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t}}},"el-pagination",e.$attrs,!1))],1)},s=[],i={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:10},pageSizes:{type:Array,default(){return[5,10,20,30,50]}},queryParam:{},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get(){return this.page},set(e){this.$emit("update:page",e)}},pageSize:{get(){return this.limit},set(e){this.$emit("update:limit",e)}}},methods:{handleSizeChange(e){this.queryParam.pageSize=e,this.$emit("pagination",this.queryParam)},handleCurrentChange(e){this.queryParam.pageIndex=e,this.$emit("pagination",this.queryParam)}}},r=i,o=a(1001),n=(0,o.Z)(r,l,s,!1,null,"fcd24848",null),u=n.exports},5272:function(e,t,a){a.r(t),a.d(t,{default:function(){return d}});var l=function(){var e=this,t=e._self._c;return t("el-row",[t("el-form",{ref:"queryForm",attrs:{model:e.queryParam,inline:!0}},[t("el-form-item",{attrs:{label:"姓名："}},[t("el-input",{attrs:{placeholder:"姓名",size:"medium",clearable:""},model:{value:e.queryParam.realName,callback:function(t){e.$set(e.queryParam,"realName",t)},expression:"queryParam.realName"}})],1),t("el-form-item",{attrs:{label:"学号："}},[t("el-input",{attrs:{placeholder:"学号",size:"medium",clearable:""},model:{value:e.queryParam.username,callback:function(t){e.$set(e.queryParam,"username",t)},expression:"queryParam.username"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.handleSelect}},[e._v("查询")]),t("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(t){return e.handleDialogValue(null)}}},[e._v("新增")]),t("el-button",{attrs:{type:"success",size:"medium"},on:{click:e.downloadTemplate}},[e._v("下载模板")]),t("el-upload",{staticClass:"upload-demo",staticStyle:{display:"inline-block"},attrs:{action:"#","http-request":e.uploadHttpRequest,multiple:"",limit:1,accept:".xlsx,.xls","on-exceed":e.handleExceed,"file-list":e.fileList,"before-upload":e.beforeUpload}},[t("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",size:"medium"}},[e._v("批量导入")])],1),t("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",size:"medium"},on:{click:e.handleExport}},[e._v("批量导出")]),t("el-popconfirm",{attrs:{title:"您确定批量删除这些记录吗？"},on:{confirm:e.handleDelete},scopedSlots:e._u([{key:"reference",fn:function(){return[t("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"danger",size:"medium"}},[e._v("批量删除")])]},proxy:!0}])})],1)],1)],1)},s=[],i=a(4325),r={props:["ids"],data(){return{queryParam:{pageIndex:1,pageSize:10},file:null,fileList:[]}},methods:{handleSelect(){this.$emit("initUserList",this.queryParam)},handleDialogValue(e){this.$emit("handleEdit",e)},handleDelete(){this.$emit("handleDelete",null)},handleExceed(e,t){this.$message.warning(`当前限制选择 1 个文件，本次选择了 ${e.length} 个文件，共选择了 ${e.length+t.length} 个文件`)},beforeUpload(e){this.file=e},uploadHttpRequest(){const e=new FormData;e.append("file",this.file),i.Z.fileUpload(e).then((e=>{this.fileList=[],this.file=null,this.$message.success("导入成功"),this.$emit("initUserList")}))},downloadTemplate(){i.Z.exportUser(this.ids).then((e=>{let t=new Blob([e.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=utf-8"}),a=document.createElement("a");a.download="导入模板.xlsx",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(a),this.$message.success("下载完成")}))},handleExport(){if(0===this.ids.length)return this.$message.error("请先选择导出用户！！"),!1;i.Z.exportUser(this.ids).then((e=>{let t=new Blob([e.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=utf-8"}),a=document.createElement("a");a.download="用户信息.xlsx",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(a),this.$message.success("导出成功"),this.$emit("clearSelection")}))}}},o=r,n=a(1001),u=(0,n.Z)(o,l,s,!1,null,null,null),d=u.exports},319:function(e,t,a){a.r(t),a.d(t,{default:function(){return d}});var l=function(){var e=this,t=e._self._c;return t("div",[t("el-dialog",{attrs:{title:e.dialogTitle,center:"",visible:e.showDialog,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.showDialog=t}}},[t("el-form",{attrs:{model:e.form,inline:!0,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"学号/工号：",prop:"username"}},[t("el-input",{staticStyle:{width:"365px"},attrs:{disabled:null!=e.form.id&&"disabled"},on:{change:e.checkUsername},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}}),null==e.form.id?t("el-alert",{staticStyle:{"line-height":"10px"},attrs:{title:e.alert.title,closable:!1,type:e.alert.type}}):e._e()],1),t("el-form-item",{attrs:{label:"姓名：","label-width":"100px"}},[t("el-input",{staticStyle:{width:"365px"},model:{value:e.form.realName,callback:function(t){e.$set(e.form,"realName",t)},expression:"form.realName"}})],1),t("el-form-item",{attrs:{label:"手机号：","label-width":"100px"}},[t("el-input",{staticStyle:{width:"365px"},model:{value:e.form.phoneNumber,callback:function(t){e.$set(e.form,"phoneNumber",t)},expression:"form.phoneNumber"}})],1),t("el-form-item",{attrs:{label:"邮箱：","label-width":"100px"}},[t("el-input",{staticStyle:{width:"365px"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),t("el-form-item",{attrs:{label:"状态：","label-width":"100px",prop:"status"}},[t("el-radio-group",{model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},[t("el-radio",{attrs:{label:"0"}},[e._v("正常")]),t("el-radio",{attrs:{label:"1"}},[e._v("禁用")])],1)],1),t("el-form-item",{attrs:{label:"备注：","label-width":"100px",prop:"remark"}},[t("el-input",{staticStyle:{width:"365px"},attrs:{type:"textarea",rows:2},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.handleConfirm}},[e._v("确定")]),t("el-button",{on:{click:e.handleClose}},[e._v("取 消")])],1)],1)],1)},s=[],i=a(7877),r={props:["id","dialogTitle","showDialog"],data(){return{form:{id:null,username:null,password:"123456",status:"0",phoneNumber:null,realName:null,email:null,remark:null},alert:{title:"默认初始密码：123456",type:"success"}}},watch:{id:function(e,t){-1!=e&&e?this.search(e):this.form={id:null,username:null,password:"123456",status:"0",phoneNumber:null,realName:null,email:null,remark:null}}},methods:{search(e){i.Z.getUserByid(e).then((e=>{this.form=e.data}))},handleClose(){this.$emit("close")},handleConfirm(){i.Z.userInfoEdit(this.form).then((e=>{200==e.code?(this.$message.success(e.data),this.$emit("initUserList"),this.handleClose()):this.$message.error(e.message)}))},checkUsername(){i.Z.checkUsername(this.form).then((e=>{200!==e.code?(this.alert.title=e.message,this.alert.type="error"):(this.alert.title="默认初始密码：123456",this.alert.type="success")}))}}},o=r,n=a(1001),u=(0,n.Z)(o,l,s,!1,null,null,null),d=u.exports},5945:function(e,t,a){a.r(t),a.d(t,{default:function(){return d}});var l=function(){var e=this,t=e._self._c;return t("div",[t("el-dialog",{attrs:{title:"分配角色",width:"30%",visible:e.showDialog,"before-close":e.handleClose},on:{"update:visible":function(t){e.showDialog=t}},scopedSlots:e._u([{key:"footer",fn:function(){return[t("span",{staticClass:"dialog-footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.handleConfirm}},[e._v("确认")]),t("el-button",{on:{click:e.handleClose}},[e._v("取消")])],1)]},proxy:!0}])},[t("el-form",{attrs:{model:e.form,"label-width":"100px"}},[t("el-checkbox-group",{model:{value:e.form.checkedRoles,callback:function(t){e.$set(e.form,"checkedRoles",t)},expression:"form.checkedRoles"}},e._l(e.form.roleList,(function(a){return t("el-checkbox",{key:a.id,attrs:{label:a.id,name:"checkedRoles"}},[e._v(e._s(a.name))])})),1)],1)],1)],1)},s=[],i=(a(7658),a(7877)),r={props:{id:{type:Number,default:-1,required:!0},showDialog:{type:Boolean,default:!1,required:!0},userRoleList:{type:Array}},data(){return{form:{id:-1,roleList:[],checkedRoles:[]}}},watch:{id:function(e,t){-1!=e&&this.search(e)},userRoleList:{handler(e,t){e.forEach((e=>{this.form.checkedRoles.push(e.id)}))},deep:!0,immediate:!0}},methods:{search(){i.Z.roleList().then((e=>{200==e.code?this.form.roleList=e.data.roleList:(this.$message.error(e.message),this.handleClose())}))},handleClose(){this.form.checkedRoles=[],this.$emit("close")},handleConfirm(){i.Z.editUserRole(this.id,this.form.checkedRoles).then((e=>{200==e.code?(this.$message.success("修改成功"),this.$emit("initUserList"),this.handleClose()):this.$message.error(e.message)}))}}},o=r,n=a(1001),u=(0,n.Z)(o,l,s,!1,null,"4f3761bf",null),d=u.exports},9399:function(e,t,a){a.r(t),a.d(t,{default:function(){return p}});var l=function(){var e=this,t=e._self._c;return t("div",[t("handle-button",{attrs:{ids:e.ids},on:{handleEdit:e.handleUserDialogValue,handleDelete:e.handleDelete,clearSelection:e.clearSelection,initUserList:e.search}}),t("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,fit:"","highlight-current-row":"",border:"","row-key":"id"},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{staticStyle:{"text-align":"center"},attrs:{"reserve-selection":"",type:"selection",width:"39 ",selectable:e.checkSelectable}}),t("el-table-column",{attrs:{fixed:"",prop:"createTime",label:"注册日期",width:"160"}}),t("el-table-column",{attrs:{prop:"username",label:"用户名(学号/工号)",align:"center",width:"150"}}),t("el-table-column",{attrs:{prop:"realName",label:"姓名",align:"center",width:"100"}}),t("el-table-column",{attrs:{prop:"sex",label:"性别",align:"center",width:"50"}}),t("el-table-column",{attrs:{prop:"email",label:"邮箱",width:"180"}}),t("el-table-column",{attrs:{prop:"phoneNumber",label:"手机号",width:"115"}}),t("el-table-column",{attrs:{prop:"roles",label:"用户角色",width:"180"},scopedSlots:e._u([{key:"default",fn:function({row:a}){return e._l(a.roleList,(function(a,l){return t("el-tag",{key:l,attrs:{size:"small",type:"warning"}},[e._v(e._s(a.name))])}))}}])}),t("el-table-column",{attrs:{prop:"status",align:"center",label:"状态",width:"150"},scopedSlots:e._u([{key:"default",fn:function({row:a}){return[t("el-switch",{attrs:{"active-text":"正常","inactive-text":"禁用","active-color":"green","inactive-color":"red","active-value":"0","inactive-value":"1"},on:{change:function(t){return e.statusChangeHanle(a)}},model:{value:a.status,callback:function(t){e.$set(a,"status",t)},expression:"row.status"}})]}}])}),t("el-table-column",{attrs:{prop:"remark",label:"备注",width:"235"}}),t("el-table-column",{attrs:{fixed:"right",label:"操作",align:"center",width:"320"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"success",size:"mini",icon:"el-icon-s-tools",plain:""},on:{click:function(t){return e.handleUserRoleDialogValue(a.row)}}},[e._v("分配角色")]),t("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"success",icon:"el-icon-edit",size:"mini"},on:{click:function(t){return e.handleUserDialogValue(a.row.id)}}}),1!=a.row.id?t("el-popconfirm",{attrs:{title:"您确定要删除这条记录吗？"},on:{confirm:function(t){return e.handleDelete(a.row.id)}},scopedSlots:e._u([{key:"reference",fn:function(){return[t("el-button",{staticStyle:{"margin-left":"5px"},attrs:{size:"mini",type:"danger",icon:"el-icon-delete-solid"}})]},proxy:!0}],null,!0)}):e._e(),1!=a.row.id?t("el-popconfirm",{attrs:{title:"您确定要对这个用户重置密码吗？"},on:{confirm:function(t){return e.handleRestPassword(a.row.id)}},scopedSlots:e._u([{key:"reference",fn:function(){return[t("el-button",{staticStyle:{"margin-left":"5px"},attrs:{size:"mini",type:"warning",icon:"el-icon-refresh-left"}},[e._v("重置密码")])]},proxy:!0}],null,!0)}):e._e()]}}])})],1),t("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,queryParam:e.queryParam,pageIndex:e.queryParam.pageIndex,pageSize:e.queryParam.pageSize},on:{"update:pageIndex":function(t){return e.$set(e.queryParam,"pageIndex",t)},"update:page-index":function(t){return e.$set(e.queryParam,"pageIndex",t)},"update:pageSize":function(t){return e.$set(e.queryParam,"pageSize",t)},"update:page-size":function(t){return e.$set(e.queryParam,"pageSize",t)},pagination:e.search}}),t("user-dialog",{attrs:{showDialog:e.userDialog,dialogTitle:e.dialogTitle,id:e.id},on:{close:e.userDialogClose,initUserList:e.search}}),t("user-role-dialog",{attrs:{showDialog:e.roleDialog,id:e.userId,userRoleList:e.userRoleList},on:{close:e.roleDialogClose,initUserList:e.search}})],1)},s=[],i=(a(7658),a(8441)),r=a(7877),o=a(319),n=a(5945),u=a(5272),d={components:{Pagination:i.Z,userDialog:o["default"],UserRoleDialog:n["default"],handleButton:u["default"]},data(){return{tableData:[],queryParam:{pageIndex:1,pageSize:10},total:0,userDialog:!1,id:-1,dialogTitle:"",roleDialog:!1,userId:-1,userRoleList:[],ids:[]}},created(){this.search()},methods:{search(e){null!=e&&(this.queryParam=e),r.Z.userPage(this.queryParam).then((e=>{200===e.code?(this.tableData=e.data.list,this.total=e.data.total):this.$message.error(e.message)}))},statusChangeHanle(e){r.Z.statusUpdade(e.id,e.status).then((e=>{200===e.code?this.$message.success("修改成功"):this.$message.error(e.message),this.search()}))},handleSelectionChange(e){this.ids=e.map((e=>e.id))},checkSelectable(e){return 1!==e.id},handleDelete(e){if(null!=e&&-1==this.ids.findIndex((t=>t===e))&&this.ids.push(e),0===this.ids.length)return this.$message.error("请先选择删除用户！！"),!1;r.Z.removeUserByIds(this.ids).then((e=>{200==e.code?(this.$message.success("删除成功"),this.search(),this.clearSelection()):this.$message.error(e.message)}))},handleRestPassword(e){r.Z.resetPassword(e).then((e=>{200==e.code?(this.$message.success("修改成功"),this.search()):this.$message.error(e.message)}))},clearSelection(){this.$refs.multipleTable.clearSelection(),this.ids=[]},userDialogClose(){this.id=null,this.userDialog=!1},handleUserDialogValue(e){e?(this.id=e,this.dialogTitle="修改用户信息"):(this.id=-1,this.dialogTitle="添加用户"),this.userDialog=!0},handleUserRoleDialogValue(e){e?(this.userId=e.id,this.userRoleList=e.roleList):this.userId=-1,this.roleDialog=!0},roleDialogClose(){this.userId=-1,this.roleDialog=!1}}},c=d,m=a(1001),h=(0,m.Z)(c,l,s,!1,null,null,null),p=h.exports},4325:function(e,t,a){var l=a(4471);t["Z"]={sectionKnowsList:e=>(0,l.v_)("/api/admin/section/knows/"+e),subjectPage:e=>(0,l.v_)("/api/admin/subject/page",e),getSubjectByid:e=>(0,l.v_)("/api/admin/subject/select/"+e),subjectEdit:e=>(0,l.v_)("/api/admin/subject/edit",e),deleteSubjectById:e=>(0,l.v_)("/api/admin/subject/delete/"+e),removeSubjectByIds:e=>(0,l.v_)("/api/admin/subject/delete",e),removeKnows:e=>(0,l.v_)("/api/admin/section/knows/delete/"+e),fileUpload:e=>(0,l.Wi)("/api/admin/model/upload",e),exportUser:e=>(0,l.GR)("/api/admin/model/download",e),semesterList:()=>(0,l.v_)("/api/admin/subject/semester/list"),classPage:e=>(0,l.v_)("/api/class/page",e),loginLog:e=>(0,l.v_)("/sys/logs/login/log/page",e),operationLog:e=>(0,l.v_)("/sys/logs/operation/log/page",e),removeUserLoginLogByIds:e=>(0,l.v_)("/sys/logs/login/log/delete",e),removeUserOperationLogByIds:e=>(0,l.v_)("/sys/logs/operation/log/delete",e),getClassStudents:e=>(0,l.v_)("/api/class/stu/page",e),getStudentsByRole:e=>(0,l.v_)("/api/class/stuPage",e),getClassInfo:e=>(0,l.v_)("/api/class/"+e),removeStudentFromClass:(e,t)=>(0,l.v_)("/api/class/remove/stu/"+e+"/"+t),addStudentToClass:(e,t)=>(0,l.v_)("/api/class/add/stu/"+e+"/"+t)}}}]);
//# sourceMappingURL=9399.9b148663.js.map