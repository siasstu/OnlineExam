"use strict";(self["webpackChunkapp"]=self["webpackChunkapp"]||[]).push([[7445,1979,9998,624,8943],{8441:function(e,t,a){a.d(t,{Z:function(){return u}});var l=function(){var e=this,t=e._self._c;return t("div",{staticClass:"pagination-container",class:{hidden:e.hidden}},[t("el-pagination",e._b({attrs:{background:e.background,"current-page":e.currentPage,layout:e.layout,"page-sizes":e.pageSizes,total:e.total,"page-size":e.pageSize},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t}}},"el-pagination",e.$attrs,!1))],1)},i=[],r={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:10},pageSizes:{type:Array,default(){return[5,10,20,30,50]}},queryParam:{},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get(){return this.page},set(e){this.$emit("update:page",e)}},pageSize:{get(){return this.limit},set(e){this.$emit("update:limit",e)}}},methods:{handleSizeChange(e){this.queryParam.pageSize=e,this.$emit("pagination",this.queryParam)},handleCurrentChange(e){this.queryParam.pageIndex=e,this.$emit("pagination",this.queryParam)}}},n=r,o=a(1001),s=(0,o.Z)(n,l,i,!1,null,"fcd24848",null),u=s.exports},1979:function(e,t,a){a.r(t),a.d(t,{default:function(){return d}});var l=function(){var e=this,t=e._self._c;return t("div",[t("el-dialog",{attrs:{top:"5px",title:"分配权限",center:"",visible:e.showPerDialog,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.showPerDialog=t}},scopedSlots:e._u([{key:"footer",fn:function(){return[t("span",{staticClass:"dialog-footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.handleConfirm}},[e._v("确认")]),t("el-button",{on:{click:e.handleClose}},[e._v("取消")])],1)]},proxy:!0}])},[t("el-form",{attrs:{model:e.menuForm,"label-width":"100px"}},[t("el-tree",{ref:"tree",attrs:{data:e.treeData,"show-checkbox":"","default-expand-all":"","node-key":"id","highlight-current":"","check-strictly":!0,props:e.defaultProps},scopedSlots:e._u([{key:"default",fn:function({node:a,data:l}){return t("span",{staticClass:"custom-tree-node"},[t("span",[e._v(e._s(a.label))]),t("span",[e._v(e._s(l.remark))])])}}])})],1)],1)],1)},i=[],r=a(7877),n={props:{id:{type:Number,default:-1,required:!0},showPerDialog:{type:Boolean,default:!1,required:!0}},data(){return{treeData:[],menuForm:{id:null},defaultProps:{children:"children",label:"name"}}},watch:{id:function(e,t){this.search(e)}},methods:{search(e){r.Z.munuList().then((e=>{this.treeData=e.data})),r.Z.roleMenuList(e).then((e=>{this.$refs.tree.setCheckedKeys(e.data)}))},handleClose(){this.$emit("close")},handleConfirm(){let e=this.$refs.tree.getCheckedKeys();r.Z.editRoleMenu(this.id,e).then((e=>{200==e.code?(this.$message.success("修改成功"),this.$emit("initRoleList"),this.handleClose()):this.$message.error(e.message)}))}}},o=n,s=a(1001),u=(0,s.Z)(o,l,i,!1,null,null,null),d=u.exports},9998:function(e,t,a){a.r(t),a.d(t,{default:function(){return u}});var l=function(){var e=this,t=e._self._c;return t("el-row",[t("el-form",{ref:"queryForm",attrs:{model:e.queryParam,inline:!0}},[t("el-form-item",{attrs:{label:"角色名称："}},[t("el-input",{attrs:{size:"medium",placeholder:"角色名称",clearable:""},model:{value:e.queryParam.name,callback:function(t){e.$set(e.queryParam,"name",t)},expression:"queryParam.name"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.handleSelect}},[e._v("查询")]),t("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(t){return e.handleRoleDialogValue()}}},[e._v("新增")]),t("el-popconfirm",{attrs:{title:"您确定批量删除这些记录吗？"},on:{confirm:function(t){return e.handleDelete(null)}},scopedSlots:e._u([{key:"reference",fn:function(){return[t("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"danger",size:"medium"}},[e._v("批量删除")])]},proxy:!0}])})],1)],1)],1)},i=[],r={data(){return{queryParam:{pageIndex:1,pageSize:10}}},methods:{handleSelect(){this.$emit("initRoleList",this.queryParam)},handleRoleDialogValue(){this.$emit("handleEdit",null)},handleDelete(){this.$emit("handleDelete",null)}}},n=r,o=a(1001),s=(0,o.Z)(n,l,i,!1,null,"7433b9c4",null),u=s.exports},624:function(e,t,a){a.r(t),a.d(t,{default:function(){return d}});var l=function(){var e=this,t=e._self._c;return t("div",[t("el-dialog",{attrs:{title:e.dialogTitle,center:"",visible:e.showDialog,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.showDialog=t}}},[t("el-form",{attrs:{model:e.form,inline:!0,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"角色名称：","label-width":"100px"}},[t("el-input",{staticStyle:{width:"365px"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),t("el-form-item",{attrs:{label:"权限字符：","label-width":"100px"}},[t("el-input",{staticStyle:{width:"365px"},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}})],1),t("el-form-item",{attrs:{label:"备注：","label-width":"100px",prop:"remark"}},[t("el-input",{staticStyle:{width:"365px"},attrs:{type:"textarea",rows:2},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.handleConfirm}},[e._v("确定")]),t("el-button",{on:{click:e.handleClose}},[e._v("取 消")])],1)],1)],1)},i=[],r=a(7877),n={props:["showDialog","id","dialogTitle"],data(){return{form:{id:-1,name:"",code:"",remark:""}}},watch:{id:function(e,t){-1!=e&&e?this.search(e):this.form={id:-1,name:"",code:"",remark:""}}},methods:{search(){r.Z.getRoleById(this.id).then((e=>{this.form=e.data}))},handleClose(){this.$emit("close")},handleConfirm(){r.Z.roleEdit(this.form).then((e=>{200==e.code?(this.$message.success("修改成功"),this.$emit("initRoleList"),this.handleClose()):this.$message.error(e.message)}))}}},o=n,s=a(1001),u=(0,s.Z)(o,l,i,!1,null,null,null),d=u.exports},7445:function(e,t,a){a.r(t),a.d(t,{default:function(){return m}});var l=function(){var e=this,t=e._self._c;return t("div",[t("handle-button",{on:{handleEdit:e.handleRoleDialogValue,handleDelete:e.handleDelete,clearSelection:e.clearSelection,initRoleList:e.search}}),t("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,fit:"","highlight-current-row":"","row-key":"id"},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{staticStyle:{"text-align":"center"},attrs:{selectable:e.checkSelectable,"reserve-selection":"",type:"selection",width:"50 ",align:"center"}}),t("el-table-column",{attrs:{prop:"name",label:"角色名称",width:"200"}}),t("el-table-column",{attrs:{prop:"code",label:"权限字符",width:"130"}}),t("el-table-column",{attrs:{prop:"createTime",label:"创建时间",width:"180"}}),t("el-table-column",{attrs:{prop:"remark",label:"备注"}}),t("el-table-column",{attrs:{fixed:"right",label:"操作",align:"center",width:"330"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"success",size:"mini",icon:"el-icon-s-tools",plain:""},on:{click:function(t){return e.handleMenuDialogValue(a.row.id)}}},[e._v("分配权限")]),t("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"success",icon:"el-icon-edit",size:"mini"},on:{click:function(t){return e.handleRoleDialogValue(a.row.id)}}}),1!=a.row.id?t("el-popconfirm",{attrs:{title:"您确定要删除这条记录吗？"},on:{confirm:function(t){return e.handleDelete(a.row.id)}},scopedSlots:e._u([{key:"reference",fn:function(){return[t("el-button",{staticStyle:{"margin-left":"5px"},attrs:{size:"mini",type:"danger",icon:"el-icon-delete-solid"}})]},proxy:!0}],null,!0)}):e._e()]}}])})],1),t("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,queryParam:e.queryParam,pageIndex:e.queryParam.pageIndex,pageSize:e.queryParam.pageSize},on:{"update:pageIndex":function(t){return e.$set(e.queryParam,"pageIndex",t)},"update:page-index":function(t){return e.$set(e.queryParam,"pageIndex",t)},"update:pageSize":function(t){return e.$set(e.queryParam,"pageSize",t)},"update:page-size":function(t){return e.$set(e.queryParam,"pageSize",t)},pagination:e.search}}),t("role-per-dialog",{attrs:{id:e.rolePerId,showPerDialog:e.showPerDialog},on:{close:e.rolePerDialogClose,initRoleList:e.search}}),t("role-dialog",{attrs:{id:e.roleId,showDialog:e.showDialog,dialogTitle:e.dialogTitle},on:{close:e.roleDialogClose,initRoleList:e.search}})],1)},i=[],r=(a(7658),a(8441)),n=a(7877),o=a(624),s=a(1979),u=a(9998),d={components:{Pagination:r.Z,RoleDialog:o["default"],RolePerDialog:s["default"],handleButton:u["default"]},data(){return{tableData:[],queryParam:{pageIndex:1,pageSize:10},total:0,ids:[],showDialog:!1,showPerDialog:!1,roleId:-1,rolePerId:-1,dialogTitle:""}},created(){this.search()},methods:{search(e){null!=e&&(this.queryParam=e),n.Z.rolePage(this.queryParam).then((e=>{200===e.code?(this.tableData=e.data.list,this.total=e.data.total):this.$message.error(e.message)}))},checkSelectable(e){return 1!==e.id},clearSelection(){this.$refs.multipleTable.clearSelection(),this.ids=[]},handleSelectionChange(e){this.ids=e.map((e=>e.id))},handleRoleDialogValue(e){e?(this.roleId=e,this.dialogTitle="角色修改"):(this.roleId=-1,this.dialogTitle="角色添加"),this.showDialog=!0},roleDialogClose(){this.roleId=null,this.showDialog=!1},handleDelete(e){if(null!=e&&-1==this.ids.findIndex((t=>t===e))&&this.ids.push(e),0===this.ids.length)return this.$message.error("请先选择删除角色！！"),!1;n.Z.removeRoleByIds(this.ids).then((e=>{200==e.code?(this.$message.success("删除"),this.search(),this.clearSelection()):this.$message.error(e.message)}))},handleMenuDialogValue(e){this.rolePerId=e,this.showPerDialog=!0},rolePerDialogClose(){this.showPerDialog=!1}}},c=d,h=a(1001),p=(0,h.Z)(c,l,i,!1,null,null,null),m=p.exports}}]);
//# sourceMappingURL=7445.b457f923.js.map